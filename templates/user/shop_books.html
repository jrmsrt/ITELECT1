{% extends 'user/main_header.html' %}

{% block content %}

<title>Shop Books - BookHaven</title>
<link rel="stylesheet" href="{{ url_for('static', filename='css/user/shop_books.css') }}">

<section class="shop-books">
    <h2>Shop Books <span>You'll Love</span></h2>
    <p class="subtitle">
        Browse, explore, and collect the books that inspire you. From thrilling adventures to quiet reflections, every story is here to find its way to you.
    </p>

    <!-- Unified Search + Filter Block -->
    <div class="filter-bar">
        <input type="text" placeholder="Search by title, author, or genre..." class="search-input">
            <select class="filter-select">
                <option value="">Filter by Title</option>
                <option value="Into the Unknown">Into the Unknown</option>
                <option value="Winds of Change">Winds of Change</option>
            </select>
            <select class="filter-select">
                <option value="">Filter by Author</option>
                <option value="John Smith">John Smith</option>
                <option value="Ava Stone">Ava Stone</option>
            </select>
            <select class="filter-select">
                <option value="">Filter by Genre</option>
                <option value="Fiction">Fiction</option>
                <option value="Adventure">Adventure</option>
                <option value="Romance">Romance</option>
                <option value="Fantasy">Fantasy</option>
            </select>
            <button class="filter-btn">
                <i class="fa-solid fa-filter"></i> Apply
            </button>
        </div>

        <div class="results-count">
                Showing {{ books|length }} results
        </div>

        <!-- Grid Container -->
    <!-- BOOK GRID -->
        <div class="book-grid">
            {% for book in books %}
            <div class="book-card">

                <div class="book-cover">
                    {% if book.cover %}
                        <img src="{{ url_for('static', filename='uploads/' ~ book.cover) }}">
                    {% else %}
                        <img src="/static/images/no-cover.png">
                    {% endif %}
                </div>

                <h3 class="book-title">{{ book.title }}</h3>
                <p class="book-meta">
                    by <span>{{ book.author }}</span> | {{ book.genre }}
                </p>
                <p class="desc">{{ book.description }}</p>
                <div class="price-stock">
                    <span class="price">â‚±{{ '%.2f' | format(book.price) }}</span>

                    {% if book.stock_quantity > 0 %}
                        <span class="stock">{{ book.stock_quantity }} in stock</span>
                    {% else %}
                        <span class="stock out">Out of Stock</span>
                    {% endif %}
                </div>

                <div class="book-bottom-actions">
                    <button class="action-btn add-cart">
                    <i class="fas fa-shopping-cart"></i> Add to Cart
                    </button>
                    <button class="action-btn details">
                    <i class="fas fa-info-circle"></i> Details
                    </button>
                </div>
            </div>
            {% endfor %}
        </div>
</section>
{% endblock %}
